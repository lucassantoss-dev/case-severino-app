<h1 class="breadcrumb mt-4">Adicionar Novo Cliente</h1>

<div class="container addClient">
  <form (ngSubmit)="salvar()" [formGroup]="clienteForm">
    <mat-form-field class="example-full-width" appearance="fill">
      <mat-label>Nome: </mat-label>
      <input
        matInput
        required
        formControlName="nome_cliente"
        [(ngModel)]="cliente.nome_cliente"
      />
      <div
        *ngIf="
          !clienteForm.get('nome_cliente').pristine &&
          clienteForm.get('nome_cliente').errors
        "
      >
        <p *ngIf="clienteForm.get('nome_cliente').errors.required">
          Nome é obrigatório.
        </p>
        <p *ngIf="clienteForm.get('nome_cliente').errors.minlength">
          Nome deve ter no mínimo 3 caracters.
        </p>
        <p *ngIf="clienteForm.get('nome_cliente').errors.maxlength">
          Nome deve ter no máximo 100 caracters.
        </p>
      </div>
    </mat-form-field>
    <div class="col-md-12">
      <mat-form-field class="example-full-width" appearance="fill">
        <mat-label>E-mail</mat-label>
        <input
          matInput
          required
          formControlName="email"
          [(ngModel)]="cliente.email"
        />
        <div
          *ngIf="
            !clienteForm.get('email').pristine &&
            clienteForm.get('email').errors
          "
        >
          <p *ngIf="clienteForm.get('email').errors.email">
            Digite um e-mail válido.
          </p>
        </div>
      </mat-form-field>
    </div>
    <div class="row">
      <div class="col-md-6">
        <mat-form-field appearance="fill">
          <mat-label>Senha</mat-label>
          <input
            matInput
            required
            type="password"
            formControlName="senha"
            [(ngModel)]="cliente.senha"
          />
          <div
            *ngIf="
              !clienteForm.get('senha').pristine &&
              clienteForm.get('senha').errors
            "
          >
            <p *ngIf="clienteForm.get('senha').errors.required">
              Senha é obrigatória.
            </p>
            <p *ngIf="clienteForm.get('senha').errors.minlength">
              Senha deve ter no mínimo 6 caracters.
            </p>
            <p *ngIf="clienteForm.get('senha').errors.maxlength">
              Senha deve ter no máximo 12 caracters.
            </p>
          </div>
        </mat-form-field>
      </div>
      <div class="col-md-6">
        <mat-form-field appearance="fill">
          <mat-label>Confirmar Senha</mat-label>
          <input
            matInput
            required
            type="password"
            [(ngModel)]="confirmar_senha"
            formControlName="confirmar_senha"
          />
          <div
            *ngIf="
              !clienteForm.get('confirmar_senha').pristine &&
              clienteForm.get('confirmar_senha').errors
            "
          >
            <p *ngIf="clienteForm.get('confirmar_senha').errors.required">
              Confirme sua senha.
            </p>
            <p
              *ngIf="
              clienteForm.get('confirmar_senha').errors.senhasNaoCoincidem
              "
            >
              As senhas não coincidem.
            </p>
          </div>
        </mat-form-field>
      </div>
    </div>
    <div class="col-md-12">
      <mat-label
        >Situação
        <mat-slide-toggle
        [(ngModel)]="cliente.situacao"
        formControlName="situacao" color="primary" (change)="onChange($event)">{{ situacao }}</mat-slide-toggle>
      </mat-label>
    </div>
    <div class="row">
      <div class="col-md-3">
        <button
          [disabled]="!clienteForm.valid"
          type="submit"
          class="btn btn-primary"
        >
          <i class="fa fa-save"></i> Salvar
        </button>
        <button
          type="button"
          class="btn btn-danger"
          (click)="voltarParaListagem()"
        >
          <i class="fa fa-arrow-alt-circle-left"></i> Voltar
        </button>
      </div>
    </div>
  </form>
</div>
